
CondaError: Run 'conda init' before 'conda activate'

2025-06-10 12:28:17,765 - distributed.worker - ERROR - Compute Failed
Key:       ('lambda-7a0ba0354f70e11093dddfb9b317cd1a', 99)
State:     executing
Function:  execute_task
args:      ((<function reify at 0x7f632c0daee0>, (<function map_chunk at 0x7f632c0db310>, <function Context.parallel_run.<locals>.<lambda> at 0x7f632c108670>, [[{'task': Task(proc=<function run at 0x7f632c1d2a60>, args=Namespace(input_segmentation_parameters='p30-E165_R2_default_1_ZLevel_cpsam/segmentation_specification.json', tile_index=198, overwrite=True)), 'cnt_args': {'name': './task-198', 'dask_args': {'workers': 3}, 'fs_args': {'aws_profile_name': None, 'aws_access_key': None, 'aws_secret_key': None, 'gcs_service_account_key': None}, 'log_args': {'fname': None, 'lvl': 2, 'verbose': True}, 'prof_args': {'profile_file': None}}}, {'task': Task(proc=<function run at 0x7f632c1d2a60>, args=Namespace(input_segmentation_parameters='p30-E165_R2_default_1_ZLevel_cpsam/segmentation_specification.json', tile_index=199, overwrite=True)), 'cnt_args': {'name': './task-199', 'dask_args': {'workers': 3}, 'fs_args': {'aws_profile_name': None, 'aws_access_key': None, 'aws_secret_key': None, 'gcs_service_acco
kwargs:    {}
Exception: 'TypeError("__init__() got an unexpected keyword argument \'min_size\'")'
Traceback: '  File "/beegfs/scratch/ric.broccoli/kubacki.michal/conda/envs/vpt-env/lib/python3.9/site-packages/dask/bag/core.py", line 1868, in reify\n    seq = list(seq)\n  File "/beegfs/scratch/ric.broccoli/kubacki.michal/conda/envs/vpt-env/lib/python3.9/site-packages/dask/bag/core.py", line 2056, in __next__\n    return self.f(*vals)\n  File "/beegfs/scratch/ric.broccoli/kubacki.michal/conda/envs/vpt-env/lib/python3.9/site-packages/vpt/app/context.py", line 166, in <lambda>\n    mp_bag = mp_bag.map(lambda b: _context_wrapper(**b))\n  File "/beegfs/scratch/ric.broccoli/kubacki.michal/conda/envs/vpt-env/lib/python3.9/site-packages/vpt/app/context.py", line 163, in _context_wrapper\n    return task.proc(task.args)\n  File "/beegfs/scratch/ric.broccoli/kubacki.michal/conda/envs/vpt-env/lib/python3.9/site-packages/vpt/run_segmentation_on_tile/__init__.py", line 11, in run\n    run_segmentation_on_tile(args)\n  File "/beegfs/scratch/ric.broccoli/kubacki.michal/conda/envs/vpt-env/lib/python3.9/site-packages/vpt/run_segmentation_on_tile/main.py", line 113, in run_segmentation_on_tile\n    result = segmentation_on_tile(seg_spec, args.tile_index)\n  File "/beegfs/scratch/ric.broccoli/kubacki.michal/conda/envs/vpt-env/lib/python3.9/site-packages/vpt/run_segmentation_on_tile/main.py", line 87, in segmentation_on_tile\n    tasks_result = get_tile_segmentation(seg_spec, window_info)\n  File "/beegfs/scratch/ric.broccoli/kubacki.michal/conda/envs/vpt-env/lib/python3.9/site-packages/vpt/run_segmentation_on_tile/main.py", line 26, in get_tile_segmentation\n    seg_result = runner(\n  File "/beegfs/scratch/ric.broccoli/kubacki.michal/conda/envs/vpt-env/lib/python3.9/site-packages/vpt_plugin_cellpose/segment.py", line 24, in run_segmentation\n    parameters = CellposeSegParameters(**segmentation_parameters)\n'

